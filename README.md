# 🍊곧,감

누군가의 기록이 나에게는 정보가 되고, 또 나의 기록이 누군가에게는 정보가 되는 여행 플랫폼

원티드 해,커리어 해커톤

![Picture1](https://user-images.githubusercontent.com/56557862/144454271-5ec84ca2-af7a-49b8-8603-d27d77e0e444.jpg)


2021.10 ~ 2021.11

맛있게 익은 곶감이 되기 위해 모인 **반시들!!!**  

- 열정맨 반시 프론트엔드 곽혜원
- 커피맛 반시 백엔드 정진호
- 조용한 관종반시 디자인/마케팅 김승혜
- 고당도 생각을 쌓는 반시 디자인/기획 이영희


### 곧,감이 나오게 된 배경?

위드 코로나 시대에 대학생들이 가장 먼저 하고 싶은 것은 단연 여행입니다. 여행 서비스와 콘텐츠들이 넘쳐나지만, 

**'여행을 가고싶어'** 라는 생각이 들어도 

**'어디로 가야겠어'** 라고 결정하고

**'무엇을 해야겠어'** 라고 계획을 세우는 것은 쉽지 않습니다. 

대학생들이 소셜 피드를 통해 정보를 얻고, 자신의 경험을 공유하고 기록하는 것을 즐기는 것에 주목하여 누군가의 기록이 나에게는 정보가 되고 또 나의 기록이 누군가에게는 정보가 되는 여행 플랫폼을 기획하였습니다.

### 그래서 뭐하는 서비스라구?

기록을 원하는 사람은 여행 장소 별로 조각을 기록하고, 조각을 조각모음으로 묶어 전체 일정과 동선을 정리합니다. 사진의 위치와 날짜 정보를 기반으로, 직접 입력할 필요없이 정보가 정리됩니다.

정보수집을 원하는 사람은 피드 형식으로 가볍게 여행 기록과 정보를 탐색하고, 타인의 기록을 아카이빙합니다. 동선과 장소 등 여행에 관련된 정보를 확인할 수 있습니다.

타서비스와 다르게, 여행 기록을 (위치, 시간등) 쉽고 편하게 남길 수 있다는 점과 여행 정보를 하나로 모아 관리할 수 있다는 점이 특징입니다.

아래는 서비스의 핵심 플로우 입니다. 

![14](https://user-images.githubusercontent.com/56557862/144453506-afeab303-4e7e-4619-a332-ded587f99113.png)
![15](https://user-images.githubusercontent.com/56557862/144453519-2f9bf683-1797-459a-b82f-3b332f6dff2c.png)
![16](https://user-images.githubusercontent.com/56557862/144453523-e959ffc9-55bd-453b-ac91-3b98f308dbf7.png)
![17](https://user-images.githubusercontent.com/56557862/144453526-f7d52dec-5498-44bb-94e9-dd59894b3c47.png)
![18](https://user-images.githubusercontent.com/56557862/144453529-fc73e88d-2285-44d1-9887-eb5399e8e277.png)


### 기대 효과?

1. 광고성 글이 없어 검색 노동을 줄일 수 있는 가볍고 편리한 여행 정보 수집 기회 제공
2. 당장 여행 계획이 없더라도 가볍게 여행 정보를 얻을 수 있는 공간 제공
3. 자신의 여행을 기록하고 정리할 수 있는 공간 제공
4. 공유 형식을 플랫폼을 시작으로 오늘의 집, 온더룩과 같이 추후에 다양한 여행 액티비티나 장소 제휴 연결 가능

---

### 프론트엔드 개발

이번 해커톤에서는 앱 서비스를 개발이 원래 목적인데, 웹 뷰 개발도 허용이 된다고 하셨다. 리액트 네이티브를 사용해볼까도 고민했지만 팀빌딩하는 데 많은 시간이 들었고, 기획도 잡히지 않은 상황에서 남은 시간을 고려하여야만 했으므로 개발 속도를 생각해 내가 가장 익숙한 리액트와 리덕스를 사용하기로 하였다.

먼저, 프로젝트 세팅을 진행하였다. 타입스크립트 설정과 eslint, prettier, husky 등등 프로젝트 초기 세팅을 하였다.

그 다음은 페이지 라우팅을 하였다. React-router-dom을 사용하여 필요한 페이지들, 네브 바, 링크를 설정해주었다. 조각이나 조각모음같은 다이나믹 루트를 가질 수 있는 것들을 고려하였으며, 네비게이션 바가 있어야하는 페이지와 없는 페이지를 나누어 구성하였다. 

그리고 리덕스 설정을 해주었다. 스토어를 만들어주고, 루트 사가와 루트 리듀서를 만들어주었다.

api개발이 진행중인 상태라서 먼저 영희님의 디자인을 기반으로 UI부터 구성해나갔다. 프로젝트 전반에 쓰이는 텍스트 스타일별로 공통 컴포넌트를 만들어주었고 조각이나 조각모음도 마찬가지로 여러번 쓰일 수 있는 컴포넌트를 만들어서 common 폴더에 정리하였다. 

각 조각과 조각모음은 스크랩이 가능하다. 조각이나 조각모음을 누르면 해당 화면으로 이동해야하고 이벤트 버블링으로 인해 스크랩 안의 버튼을 눌러도 스크랩 함수가 발동하지 않는다. 이를 버튼과 오버레이 컴포넌트로 분리하여 조각이나 조각 모음을 누르면 오버레이의 클릭함수가 발동하고 스크랩 버튼을 누르면 스크랩을 하는 함수가 발동되도록 만들었다. 

프로젝트의 주요 기능중에 링크를 아카이빙할 수 있는 기능이 있다. 아카이빙 페이지에 가면 하단에 링크 버튼이 있다. 링크를 추가할 수 있는데 이때 링크를 복붙하였을 때 유튜브 링크면 타임라인을 입력할 수 있게 하고 원하는 폴더에 추가할 수 있다. 해당 폴더로 들어가면 링크의 미리보기가 나오는데 타임라인을 추가했다면 타임라인을 눌렀을 때 영상의 타임라인의 시간부터 재생된다. 이를 구현하기 위해 링크 미리보기 컴포넌트를 만들어주었다. 유튜브 썸네일은 [https://img.youtube.com/vi/${videoId}/0.jpg](https://img.youtube.com/vi/$%7BvideoId%7D/0.jpg) 이렇게 가지고 왔고 인풋으로 들어온 시간의 string을 파싱하는 함수를 만들어 주어서 유튜브가 www이 들어간 링크 뒤에는 #t=0h0m0s 을 추가하고 아닌 링크는  ?t=0h0m0s을 덧붙여 주어 해당 시간으로 가는 링크를 만들어서 버튼이 클릭되었을 때 이동하도록 만들어주었다. 

링크 추가하기 버튼을 눌렀을 때 나오는 모달도 신경을 써서 만들었다. React-modal에 원하는 파라미터를 넣어주고 디자인에서 요구하는 바를 고려해서 만들었다. 모달이 아래에 있으므로 밑에서 올라오는 애니메이션과 opacity를 조절하는 부분을 넣으면 보기가 좋을 것 같아서 transition을 활용해 구현해주었다. 모달을  props로 자식 엘리먼트를 받아서 모달안에 원하는 내용을 넣어줌으로써 하나의 공통 컴포넌트로 만들어 다른 곳에도 사용할 수 있게 만들었다.

타임라인을 입력하는 인풋은 총 3개로 시간, 분, 초를 입력받는다. 처음엔 시간 인풋에 포커스가 가고 인풋에 값을 입력하면 자동으로 포커스가 이동할 수있도록 useRef 훅을 사용하였다. 또 인풋 타입을 숫자로 받았으며 60이 넘어가면 자동으로 60으로 바꾸어 주었다. 

이제 조각을 만드는 플로우에 대한 구현 설명이다. 아래 네비게이션 바에 플러스 버튼을 누르면 모달이 나온다.  조각 만들기와 조각모음 만들기 버튼이 있고 조각 만들기 버튼을 누르면 조각 만들기로 이동한다. 하나의 페이지에서조각 만들기에 필요한 모든 입력값을 useState로 상태를 저장하고 단계별로 이동할때마다 랜더링 되는 컴포넌트를 바꾸어주었다. 먼저 올릴 사진을 받아야 한다. 파일을 올리는 작업은 처음이라 좀 헤맸던 것 같다. input 타입을 file로 해주고 이미지만 받도록 accept 속성을 정해주었다. 그리고 여러 파일을 받을 수 있게 multiple 속성을 추가해주었다. 사진을 받고 나면 사진에서 메타데이터를 뽑아주어야 한다. 사진이 찍힌 위치와 시간을 알기 위해서이다. Exif.js를 사용하여 GPSLatitude, GPSLongitude, GPSLatitudeRef, GPSLongitudeRef, DateTime 속성을 추출하였다. 각각 위도경도와 방향, 시간을 의미한다. 받은 위치를 기반으로 다음 단계로 넘어갔을 때, 카카오 로컬 API로 해당 위치 반경 500미터안의 카페, 식당, 관광명소 등의 정보를 가져와서 리스트로 보여준다. 그 다음은 받은 시간을 디폴트로 여행간 날을 입력받고, 어땠는지에 대한 키워드와 누구와 함께했는지를 입력받아 조각 만들기를 하면 폼데이터 형식으로 입력값들을 서버한테 보내준다. 파일은 json에 포함될 수 없다는 사실을 알게되어서 formdata안에 파일과 데이터를 넣어서 보내주었다. 성공적으로 조각이 만들어지면 만들어진 조각 페이지로 이동한다. 

조각 모음 만들기는 만들었던 조각들에서 선택을 받은 후, 조각의 이미지에서 커버이미지를 선택할 수 있다. 다음 단계는 여행일정을 받을 수 있는데, 이를 선택하면 일자별로 여행기록을 할 수 있도록 해야한다. 여행 시작날과 마친 날짜를 입력받으면 자동적으로 몇박 몇일을 다녀왔는지 계산해서 보여준다. 조각들을 일자별로 필터링하고 조각 사이사이 추가적으로 작성하고 싶은 내용을 넣을 수 있다. 이를 구현하기 위해 조각마다 데이터를 가지고 있고 그것을 조각 위에 textarea로 받아 랜더링 해주기로 했다. textarea는 글자 수에 다라 높이가 조절되도록 하였다. 일자별로 필터링한 조각들에서 평균 위치를 받아서 그 위치를 중심으로 조각 위치를 마커로 표시한 지도를 에디터 페이지 상단에 구현하였다. 1일차, 2일차와 같이 인덱스를 누르면 해당 날짜의 정보들로 다시 랜더링되며 입력했던 내용은 상단 컴포넌트에서 관리하므로 사라지지 않는다. 모든 입력이 끝나면 만들어진 조각 모음 페이지로 이동한다. 조각모음 만들기와 거의 동일한 방식으로 구현하였다. 

소셜 로그인으로 카카오 로그인 API를 달아주었다. 카카오에서 지정한 url에 앱 아이디와 리다이렉트 url을 추가한 링크로 버튼을 누르면 동의받는 페이지로 이동하고 로그인버튼을 누르면 url에 인가코드를 받아와서 서버로 해당 인가코드를 포함한 url 로 get 요청을 보내서 토큰을 받아와서 쿠키에 저장한다. 

Uploading วีบป_1 2.mp4…



### 후기

팀 빌딩부터 예선 발표까지 참 시간이 빠르게 지나갔다. 비록 결선은 가지못하고 예선에 머물렀지만 하나의 서비스를 만들기 위해서 네 사람이 모여 머리 맞대어 고민하고 노력했던 것이 결코 헛되었다고 말할 수 없다. 정말 오랜만에 개발을 위해 여러 밤을 새고 또 애를 참 많이 썼다. 다들 수고해줘서 고마웠다고 말하고 싶다. 

개발을 진행하면서 느꼈던 점은 이번에 개발이 늦춰지는 것을 막기위해 기능별로 데드라인을 설정했지만 제대로 지켜지지 않았다는 것이 아쉬웠다. CORS 에러부터 시작해서 파일 데이터를 서버로 보내는 데 문제가 생기는 등  생각보다 많은 부분에서 문제가 발생해 개발이 지연되고 어려움을 겪었지만 또 그걸 함께 해결했을 때 기쁨을 잊을 수 없다! 머리싸매다가 해결할 때 그 시원함이란ㅠㅠ 그리고 다음부터 기획이 완성되고 개발을 시작할 때 DTO가 확실하게 합의가 된 상태에서 진행해야겠다는 생각을 했다. 변경사항이 있으면 그때그때 바로 알려주면서 개발을 해야 병목이 생기지 않을 것 같다. 실제로 개발할 수 있는 시간이 2주도 되지 않은 극악난이도에서 클라이언트 서버 모두 너무 고생했다..!

디자이너분과 함께 화면 크기에 따른 요소의 크기라던지, 배치라던지 UI 부분을 함께 이야기하고 고민할 수 있어서 좋은 경험이었던 것 같다. 프로젝트 협업의 제일 즐거운 점은 다른 분야와 커뮤니케이션을 하면서 알아가는 것도 많고 생각해볼 거리도 생긴다는 점인 것 같다. 디자이너분이 센스있게 프로젝트에 사용되는 색상 세트와 텍스트 스타일을 모두 정리해주셔서 개발에 정말 많은 도움이 되었다.ㅠㅠ 우리 서비스의 가장 눈에 띄는 점을 꼽자면 단연 쥬니이다.. 쉼표머리가 최준을 떠오르게 한다. 이번 해커톤에서는 특이하게도 숏폼을 활용한 챌린지를 기획해야만 했는데 마케터분이 쥬니를 활용한 서비스 광고를 아주 멋들어지게 만들어주셨다고 한다. 이것때문이라도 결선 가야한다고 생각했는데 심사위원분들 이걸 몰라봐주다니! ㅠㅠ 



https://user-images.githubusercontent.com/56557862/144453963-73c9e7d5-6811-4ac9-98a1-db9f03935468.mp4




거의 한달이 다 되는 기간동안 곧,감을 만들기 위해 팀원 4명 모두 너무 고생했다. 다들 너무 고생한 탓에 마지막엔 정말 시들시들해졌다 마치 우리 팀명처럼..  우리 모두 후회없이 최선을 다해서 결과를 내었고 지원한 많은 팀들중 50팀안에 들었다는 사실이 정말 기쁘다.
